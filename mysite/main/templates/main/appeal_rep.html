{% extends 'main/header.html' %}


  {% block content %}

    <script>
    $(document).ready(function() {
    var getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

        for (i = 0; i < sURLVariables.length; i++) {
            sParameterName = sURLVariables[i].split('=');

            if (sParameterName[0] === sParam) {
                return sParameterName[1] === undefined ? true : sParameterName[1];
            }
        }
    };
        var var_page = getUrlParameter('display_type');
        var var_month = getUrlParameter('month');
        var var_year = getUrlParameter('year');
        $('.change_url').each(function(){
            var a_link = $(this).attr('href');
            if (var_page === undefined) {
                $(this).attr('href', '?' + a_link)
            } else {
<!--                $('input[value=var_page]').prop('checked', true);-->
                $(this).attr('href', '?display_type=' + var_page + '&month=' + var_month + '&year=' + var_year + '&' + a_link);
            };
        });

    });
    </script>

  <style xmlns="http://www.w3.org/1999/html">
    form {
        display: flex;
        align-items: center;
        justify-content: right;
    }

    .flex-wrap {display:flex;}
    .flex-wrap label {width:400px;margin-right:auto;}
    .flex-wrap button {width:450px;margin-right:auto;}
    .flex-wrap input {width:calc(100% - 50px);}
    .flex-wrap select {width:calc(100% - 250px);}

    input {
        width: 20px;
        padding: 8px 20px;
        margin: 8px 0;
        margin-right: 20px;
        box-sizing: border-box;
        border: 1px solid #ccc;
        -webkit-transition: 0.5s;
        transition: 0.5s;
        outline: none;
        height: 60px;
        border-radius: 10px;
    }

    button {
        width: 120px;
        padding: 6px 30px;
        margin: 8px 0;
    }

    th {
        vertical-align:
        middle !important;
        text-align: center;
    }

    label.filter {
        margin-right: 10px;
        display:flex;
        align-items: center;
        height: 60px;
        border: 1px solid #ccc;
        border-radius: 10px;
        padding: 0 30px;
        cursor: pointer;
        text-align: center;
    }

    label.filter:hover {
        background: #d9d9d9;
    }

    select {
        height: 60px;
        border-radius: 10px !important;
        margin-right: 10px;
        cursor: pointer;
    }

    select:hover {
        background: #d9d9d9;
    }

    button {
        height: 60px;
        border-radius: 10px !important;
    }

    button:hover {
        background: #d9d9d9;
    }
    </style>

  {% if user.is_authenticated %}
    <br>

    <div style="padding: 20px 0px;padding-left:9.5%;margin-top:30px;width:98%;display:flex">
<!--        <form method="GET" action="/calls_rep" style="width:60%">-->
<!--             {{ months }} {{ years }}-->
<!--            <button type="submit">Показать</button>-->
<!--        </form>-->
<!--    </div>-->

<!--    <div style="padding-left:10%;width:98%;">-->
        <table class="table table-striped">
          <thead>
            <tr align="center">
                <th scope="col" width="200">Оператор</th>
                <th scope="col">Тип обращения</th>
                <th scope="col">Проблема</th>
                <th scope="col">Время обращения</th>
                <th scope="col">Редактировать</th>
            </tr>
          </thead>
          <tbody>
            {% for list in appeal_rep %}
                <tr align="center">
                    <th scope="col">{{ list.user_name }}</th>
                    <th scope="col">{{ list.appeal_type }}</th>
                    <th scope="col">{{ list.appeal_result }}</th>
                    <th scope="col">{{ list.appeal_date }}</th>
                    <th><a href="/update_appeal/{{list.id}}">Редактировать</a></th>
                </tr>
            {% endfor %}
          </tbody>
        </table>
    </div>

    {% if is_paginated %}

        {% include 'main/includes/pagination.html' %}

    {% endif %}

  {% else %}

        {% include 'main/includes/non_authorised.html' %}

  {% endif %}

  {% endblock %}
